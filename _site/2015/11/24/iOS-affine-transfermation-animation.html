<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="baidu-site-verification" content="w9Akh6dPe4" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<!--[if lte IE 8]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

<title>iOS动画和特效（七）仿射变换-CGAffineTransform | 曾绍明的博客</title>
<meta name="author" content="曾绍明">




<link rel="shortcut icon" href="" />

<link rel="stylesheet" type="text/css" href="/assets/css/style.css">

<link href="/pages/rss.xml" rel="alternate" title="曾绍明的博客" type="application/atom+xml">



  </head>
  <body>
        <aside id="sidebar">
  <nav id="tags">
    <a href="/index.html" id="avatar" style="background-image:url(https://avatars1.githubusercontent.com/u/15245912)"></a>

    <ul id="tags__ul">
      <li id="pl__all" class="tags__li tags-btn active">所有文章</li>
       
        <li id="技术" class="tags__li tags-btn">技术</li>
       
        <li id="web前端" class="tags__li tags-btn">web前端</li>
       
        <li id="专题" class="tags__li tags-btn">专题</li>
       
        <li id="iOS" class="tags__li tags-btn">iOS</li>
       
        <li id="生活" class="tags__li tags-btn">生活</li>
       
        <li id="react-native" class="tags__li tags-btn">react-native</li>
       
        <li id="其他" class="tags__li tags-btn">其他</li>
       
        <li id="IoT" class="tags__li tags-btn">IoT</li>
      
    </ul>

    <div id="tags__bottom">
      <a href="http://github.com/ZSMSimon" id="icon-github" class="tags-btn fontello" target="_blank"></a>
      <a href="/pages/rss.xml" id="icon-feed" class="tags-btn fontello" target="_blank"></a>
      <a href="mailto:ZSMSimon@163.com" id="icon-email" class="tags-btn fontello"></a>
    </div>
  </nav> <!-- end #tags -->

  <div id="posts-list">
    <form action="" id="search-form">
      <a href="/index.html" id="mobile-avatar" style="background-image:url(https://avatars1.githubusercontent.com/u/15245912)"></a>
      <!-- NOTE: input field is disabled by default -->
      <input id="search-input" type="text" placeholder="Search..." >
    </form>

    <nav id="pl__container">
    
      <a class="IoT pl__all" href="/2017/05/16/JavaScript-mqtt-temperaturedemo.html"><span class="pl__circle"></span><span class="pl__title">IoT技术选型及模型设计的思考</span><span class="pl__date">17/05/16</span></a>
    
      <a class="IoT pl__all" href="/2017/05/02/hello-nodemcu.html"><span class="pl__circle"></span><span class="pl__title">hello nodemcu</span><span class="pl__date">17/05/02</span></a>
    
      <a class="其他 pl__all" href="/2017/03/16/Recruitment.html"><span class="pl__circle"></span><span class="pl__title">阿里云iot事业部招聘信息</span><span class="pl__date">17/03/16</span></a>
    
      <a class="技术 pl__all" href="/2017/01/23/zhihu-live-a-hour-for-bluetooth-0.html"><span class="pl__circle"></span><span class="pl__title">知乎live：一小时蓝牙科普 文字整理版</span><span class="pl__date">17/01/23</span></a>
    
      <a class="web前端 pl__all" href="/2016/12/08/eslint-guide.html"><span class="pl__circle"></span><span class="pl__title">ESLint使用</span><span class="pl__date">16/12/08</span></a>
    
      <a class="其他 pl__all" href="/2016/12/06/how-to-fupan.html"><span class="pl__circle"></span><span class="pl__title">柳传志：我的复盘方法论</span><span class="pl__date">16/12/06</span></a>
    
      <a class="react-native pl__all" href="/2016/11/14/react-native-flux%E6%95%B0%E6%8D%AE%E6%B5%81.html"><span class="pl__circle"></span><span class="pl__title">flux数据流在rn中的使用</span><span class="pl__date">16/11/14</span></a>
    
      <a class="专题 pl__all" href="/2016/05/09/iOS-networking-0.html"><span class="pl__circle"></span><span class="pl__title">iOS 网络请求专题</span><span class="pl__date">16/05/09</span></a>
    
      <a class="iOS pl__all" href="/2016/04/03/iOS-JavaScriptCore.html"><span class="pl__circle"></span><span class="pl__title">iOS JavaScriptCore使用</span><span class="pl__date">16/04/03</span></a>
    
      <a class="iOS pl__all" href="/2016/04/02/iOS-3DTouch-3.html"><span class="pl__circle"></span><span class="pl__title">iOS 3D touch开发(三) Force Properties-按压力度</span><span class="pl__date">16/04/02</span></a>
    
      <a class="iOS pl__all" href="/2016/04/01/iOS-3DTouch-2.html"><span class="pl__circle"></span><span class="pl__title">iOS 3D touch开发(二) peek and pop - 预览和弹出</span><span class="pl__date">16/04/01</span></a>
    
      <a class="iOS pl__all" href="/2016/03/21/iOS-3DTouch-1.html"><span class="pl__circle"></span><span class="pl__title">iOS 3D touch开发(一) Home Screen Quick Actions</span><span class="pl__date">16/03/21</span></a>
    
      <a class="iOS pl__all" href="/2016/03/10/iOS-unit-test.html"><span class="pl__circle"></span><span class="pl__title">iOS单元测试</span><span class="pl__date">16/03/10</span></a>
    
      <a class="iOS pl__all" href="/2016/02/29/iOS-objc-styleguide.html"><span class="pl__circle"></span><span class="pl__title">iOS objc编程规范</span><span class="pl__date">16/02/29</span></a>
    
      <a class="iOS pl__all" href="/2016/02/13/ios-networking-5.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（五）网络请求中的cookie</span><span class="pl__date">16/02/13</span></a>
    
      <a class="iOS pl__all" href="/2016/02/09/ios-networking-4.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（四） http异步文件上传和下载以及进度指示</span><span class="pl__date">16/02/09</span></a>
    
      <a class="iOS pl__all" href="/2016/02/04/ios-networking-3.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（三） http异步请求和https认证</span><span class="pl__date">16/02/04</span></a>
    
      <a class="iOS pl__all" href="/2016/02/03/ios-networking-2.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（二） http异步队列请求</span><span class="pl__date">16/02/03</span></a>
    
      <a class="iOS pl__all" href="/2016/02/03/ios-networking-1.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（一） http同步请求</span><span class="pl__date">16/02/03</span></a>
    
      <a class="react-native pl__all" href="/2016/02/02/react-native-demo.html"><span class="pl__circle"></span><span class="pl__title">react-native（二） 自己写的react-native学习demo和整理的tips</span><span class="pl__date">16/02/02</span></a>
    
      <a class="react-native pl__all" href="/2016/01/11/react-native-helloworld.html"><span class="pl__circle"></span><span class="pl__title">react-native（一） hello world</span><span class="pl__date">16/01/11</span></a>
    
      <a class="iOS pl__all" href="/2016/01/06/iOS-app-versions.html"><span class="pl__circle"></span><span class="pl__title">api如何设计才能支撑多个不同版本的app共存</span><span class="pl__date">16/01/06</span></a>
    
      <a class="web前端 pl__all" href="/2015/12/31/playwith-imageToAscii.html"><span class="pl__circle"></span><span class="pl__title">那些好玩的nodejs插件 - 把图片转为ascii</span><span class="pl__date">15/12/31</span></a>
    
      <a class="web前端 pl__all" href="/2015/12/10/fe-componentization.html"><span class="pl__circle"></span><span class="pl__title">前端开发框架 - seajs+handlebars模块化开发</span><span class="pl__date">15/12/10</span></a>
    
      <a class="web前端 pl__all" href="/2015/12/06/fe-nginx-usage.html"><span class="pl__circle"></span><span class="pl__title">mac环境nginx的安装和使用</span><span class="pl__date">15/12/06</span></a>
    
      <a class="web前端 pl__all" href="/2015/12/03/fe-js-handlebars.html"><span class="pl__circle"></span><span class="pl__title">handlerbars的使用及模板预编译</span><span class="pl__date">15/12/03</span></a>
    
      <a class="web前端 pl__all" href="/2015/12/01/fe-engineering-gulp.html"><span class="pl__circle"></span><span class="pl__title">gulp自动构建工具教程</span><span class="pl__date">15/12/01</span></a>
    
      <a class="web前端 pl__all" href="/2015/11/27/fe-environment.html"><span class="pl__circle"></span><span class="pl__title">前端开发工具和环境搭建</span><span class="pl__date">15/11/27</span></a>
    
      <a class="web前端 pl__all" href="/2015/11/26/rem-em-px.html"><span class="pl__circle"></span><span class="pl__title">css3属性rem的使用</span><span class="pl__date">15/11/26</span></a>
    
      <a class="生活 pl__all" href="/2015/11/26/mylift-github.html"><span class="pl__circle"></span><span class="pl__title">我每天都在github上做些什么</span><span class="pl__date">15/11/26</span></a>
    
      <a class="iOS pl__all" href="/2015/11/24/iOS-affine-transfermation-animation.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（七）仿射变换-CGAffineTransform</span><span class="pl__date">15/11/24</span></a>
    
      <a class="iOS pl__all" href="/2015/11/22/iOS-library-spring.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（六）swift动画库spring使用和代码拆解</span><span class="pl__date">15/11/22</span></a>
    
      <a class="iOS pl__all" href="/2015/11/16/iOS-Implicit-Animation.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（五）layer隐式动画</span><span class="pl__date">15/11/16</span></a>
    
      <a class="iOS pl__all" href="/2015/11/06/iOS-controller-transitioning.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（四）controller间的自定义过渡效果</span><span class="pl__date">15/11/06</span></a>
    
      <a class="iOS pl__all" href="/2015/11/01/iOS-MotionEffects.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（三）MotionEffects</span><span class="pl__date">15/11/01</span></a>
    
      <a class="iOS pl__all" href="/2015/10/30/iOS-UIKit-Dynamics.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（二）UIKit力学行为</span><span class="pl__date">15/10/30</span></a>
    
      <a class="iOS pl__all" href="/2015/10/30/iOS-Animation-UIViewAndCoreAnimation.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（一）UIView动画和CoreAnimation</span><span class="pl__date">15/10/30</span></a>
    
      <a class="专题 pl__all" href="/2015/10/29/iOS-animation-0.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效专题（零）- 大纲和计划</span><span class="pl__date">15/10/29</span></a>
    
      <a class="iOS pl__all" href="/2015/10/17/ios-webView.html"><span class="pl__circle"></span><span class="pl__title">UIWebView和WKWebView的使用及js交互</span><span class="pl__date">15/10/17</span></a>
    
      <a class="iOS pl__all" href="/2015/10/06/ios-swift-quick.html"><span class="pl__circle"></span><span class="pl__title">swift5分钟语法速记</span><span class="pl__date">15/10/06</span></a>
    
      <a class="iOS pl__all" href="/2015/09/20/ios-macro.html"><span class="pl__circle"></span><span class="pl__title">ios宏的使用和技巧</span><span class="pl__date">15/09/20</span></a>
    
      <a class="iOS pl__all" href="/2015/09/11/ios-BLE-4.html"><span class="pl__circle"></span><span class="pl__title">ios蓝牙开发（四）BabyBluetooth蓝牙库介绍</span><span class="pl__date">15/09/11</span></a>
    
      <a class="iOS pl__all" href="/2015/09/07/ios-BLE-3.html"><span class="pl__circle"></span><span class="pl__title">ios蓝牙开发（三）app作为外设被连接的实现</span><span class="pl__date">15/09/07</span></a>
    
      <a class="iOS pl__all" href="/2015/09/02/ios-draw-Graffiti-2.html"><span class="pl__circle"></span><span class="pl__title">ios绘图demo,做一个涂鸦板(下)</span><span class="pl__date">15/09/02</span></a>
    
      <a class="web前端 pl__all" href="/2015/08/29/go-deep-into-unsilder.js.html"><span class="pl__circle"></span><span class="pl__title">深入理解unslider.js源码</span><span class="pl__date">15/08/29</span></a>
    
      <a class="生活 pl__all" href="/2015/08/23/life-keyboardAndHHKB.html"><span class="pl__circle"></span><span class="pl__title">键盘那些事，hhkb开箱</span><span class="pl__date">15/08/23</span></a>
    
      <a class="技术 pl__all" href="/2015/08/22/github-ImagesUploadWebSite.html"><span class="pl__circle"></span><span class="pl__title">自己markdown博客的图床程序</span><span class="pl__date">15/08/22</span></a>
    
      <a class="iOS pl__all" href="/2015/08/19/ios-ThreadAndAsynchronization.html"><span class="pl__circle"></span><span class="pl__title">ios的线程和同步异步操作</span><span class="pl__date">15/08/19</span></a>
    
      <a class="iOS pl__all" href="/2015/08/14/ios-BLE-2.html"><span class="pl__circle"></span><span class="pl__title">ios蓝牙开发（二）ios连接外设的代码实现</span><span class="pl__date">15/08/14</span></a>
    
      <a class="iOS pl__all" href="/2015/07/26/ios-draw-Graffiti.html"><span class="pl__circle"></span><span class="pl__title">ios绘图demo,做一个涂鸦板(上)</span><span class="pl__date">15/07/26</span></a>
    
      <a class="iOS pl__all" href="/2015/07/25/ios-draw-base.html"><span class="pl__circle"></span><span class="pl__title">ios绘图基础</span><span class="pl__date">15/07/25</span></a>
    
      <a class="iOS pl__all" href="/2015/07/17/ios-BLE-1.html"><span class="pl__circle"></span><span class="pl__title">iOS蓝牙开发（一）蓝牙相关基础知识</span><span class="pl__date">15/07/17</span></a>
    
      <a class="专题 pl__all" href="/2015/07/17/ios-BLE-0.html"><span class="pl__circle"></span><span class="pl__title">iOS蓝牙的开发专题</span><span class="pl__date">15/07/17</span></a>
    
      <a class="技术 pl__all" href="/2015/07/07/mybatis.html"><span class="pl__circle"></span><span class="pl__title">MyBatis简单使用的demo</span><span class="pl__date">15/07/07</span></a>
    
      <a class="技术 pl__all" href="/2015/07/06/rabbitmq.html"><span class="pl__circle"></span><span class="pl__title">RabbitMQ使用</span><span class="pl__date">15/07/06</span></a>
    
      <a class="iOS pl__all" href="/2015/06/14/ios-library-masonry.html"><span class="pl__circle"></span><span class="pl__title">Masonry的使用</span><span class="pl__date">15/06/14</span></a>
    
      <a class="专题 pl__all" href="/2015/06/14/ios-library-0.html"><span class="pl__circle"></span><span class="pl__title">iOS中那些好用的第三方库</span><span class="pl__date">15/06/14</span></a>
    
      <a class="iOS pl__all" href="/2015/05/29/ios-develop-tool.html"><span class="pl__circle"></span><span class="pl__title">提高iOS开发效率的工具</span><span class="pl__date">15/05/29</span></a>
    
      <a class="技术 pl__all" href="/2015/05/28/spring-4.html"><span class="pl__circle"></span><span class="pl__title">Spring 文件上传</span><span class="pl__date">15/05/28</span></a>
    
      <a class="技术 pl__all" href="/2015/05/28/spring-3.html"><span class="pl__circle"></span><span class="pl__title">Spring- Hibernate数据基本操作</span><span class="pl__date">15/05/28</span></a>
    
      <a class="技术 pl__all" href="/2015/05/28/spring-2.html"><span class="pl__circle"></span><span class="pl__title">Spring RestController 请求参数详解</span><span class="pl__date">15/05/28</span></a>
    
      <a class="技术 pl__all" href="/2015/05/28/spring-1.html"><span class="pl__circle"></span><span class="pl__title">Spring和hibernate的maven配置</span><span class="pl__date">15/05/28</span></a>
    
      <a class="技术 pl__all" href="/2015/05/28/tomcat-domain-name.html"><span class="pl__circle"></span><span class="pl__title">tomcat部署绑定多个域名</span><span class="pl__date">15/05/28</span></a>
    
      <a class="专题 pl__all" href="/2015/05/28/spring-0.html"><span class="pl__circle"></span><span class="pl__title">Spring4+hibernate专题</span><span class="pl__date">15/05/28</span></a>
    
      <a class="web前端 pl__all" href="/2015/04/29/css-selector.html"><span class="pl__circle"></span><span class="pl__title">css选择器的用法</span><span class="pl__date">15/04/29</span></a>
    
      <a class="技术 pl__all" href="/2014/02/12/how-to-deploy-a-blog-on-github-by-jekyll.html"><span class="pl__circle"></span><span class="pl__title">在Github上搭建Jekyll博客和创建主题</span><span class="pl__date">14/02/12</span></a>
    
      <a class="技术 pl__all" href="/2013/04/23/opensource-licenses.html"><span class="pl__circle"></span><span class="pl__title">五中常见的开源协议整理(BSD,Apache,GPL,LGPL,MIT)</span><span class="pl__date">13/04/23</span></a>
    
    </nav>
  </div> <!-- end #posts-list -->
</aside> <!-- end #sidebar -->
    <div id="post">
      <div id="pjax">
        <article id="post__content">
    <h1 id="post__title" data-identifier="20151124">iOS动画和特效（七）仿射变换-CGAffineTransform</h1>
    <blockquote>
  <p>仿射变换 AffineTransform，在iOS中他的实现类是CGAffineTransform和CATransform3D，很多动画效果都需要用到仿射去完成
所以仿射是动画基础，不能熟练使用也肯定玩不好动画特效的</p>
</blockquote>

<p>在iOS动画和特效专题（六）中有用到仿射变换的内容，这一篇专门来研究一下仿射变换，已经在iOS中的使用。在我写这章内容前我也
对仿射变换一无所知，也是查了一下资料作和看了许多别人的解释，才慢慢了解。和大家一起学习，若有写的不正确的地方也欢迎指出。</p>

<h2 id="table-of-content">table of content</h2>

<ul>
  <li>仿射是什么</li>
  <li>仿射变换的原理和计算</li>
  <li>仿射在iOS中常用的方法</li>
  <li>3D仿射变换</li>
</ul>

<h2 id="仿射是什么">仿射是什么</h2>

<p>先看看上一篇文章中用到的仿射方法作为例子</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    <span class="c1">//Srping fall动画效果实现</span>
    <span class="c1">//使用了CGAffineTransformMakeTranslation设置y轴的位移</span>
    <span class="c1">//使用了CGAffineTransformMakeRotation 做了旋转</span>
    <span class="c1">//使用了CGAffineTransformConcat合并了位移和旋转仿射效果</span>
    <span class="kt">UIView</span><span class="o">.</span><span class="nf">animateWithDuration</span><span class="p">(</span><span class="kt">NSTimeInterval</span><span class="p">(</span><span class="n">duration</span><span class="p">),</span> <span class="nv">delay</span><span class="p">:</span> <span class="kt">NSTimeInterval</span><span class="p">(</span><span class="n">delay</span><span class="p">),</span> <span class="nv">usingSpringWithDamping</span><span class="p">:</span> <span class="n">damping</span><span class="p">,</span> <span class="nv">initialSpringVelocity</span><span class="p">:</span> <span class="n">velocity</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="kt">CurveLinear</span><span class="p">,</span><span class="o">.</span><span class="kt">AllowUserInteraction</span><span class="p">],</span> <span class="nv">animations</span><span class="p">:</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
            <span class="k">let</span> <span class="nv">translate</span> <span class="o">=</span> <span class="kt">CGAffineTransformMakeTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">rotate</span> <span class="o">=</span> <span class="kt">CGAffineTransformMakeRotation</span><span class="p">(</span><span class="mi">15</span> <span class="o">*</span> <span class="kt">CGFloat</span><span class="p">(</span><span class="kt">M_PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">))</span>
            <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">CGAffineTransformConcat</span><span class="p">(</span><span class="n">translate</span><span class="p">,</span> <span class="n">rotate</span><span class="p">)</span>
        <span class="p">},</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>


    <span class="c1">//Srping squeezeRight 动画效果实现</span>
    <span class="c1">//使用了CGAffineTransformMakeTranslation设置x轴的位移</span>
    <span class="c1">//使用了CGAffineTransformMakeScale 做了缩放</span>
    <span class="c1">//使用了CGAffineTransformConcat合并了位移和缩放仿射效果</span>
     <span class="kt">UIView</span><span class="o">.</span><span class="nf">animateWithDuration</span><span class="p">(</span><span class="kt">NSTimeInterval</span><span class="p">(</span><span class="n">duration</span><span class="p">),</span> <span class="nv">delay</span><span class="p">:</span> <span class="kt">NSTimeInterval</span><span class="p">(</span><span class="n">delay</span><span class="p">),</span> <span class="nv">usingSpringWithDamping</span><span class="p">:</span> <span class="n">damping</span><span class="p">,</span> <span class="nv">initialSpringVelocity</span><span class="p">:</span> <span class="n">velocity</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="kt">CurveLinear</span><span class="p">,</span><span class="o">.</span><span class="kt">AllowUserInteraction</span><span class="p">],</span> <span class="nv">animations</span><span class="p">:</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
                <span class="k">let</span> <span class="nv">translate</span> <span class="o">=</span> <span class="kt">CGAffineTransformMakeTranslation</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="c1">//slide开头就不需要scale效果</span>
                <span class="k">let</span> <span class="nv">scale</span> <span class="o">=</span> <span class="kt">CGAffineTransformMakeScale</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">CGAffineTransformConcat</span><span class="p">(</span><span class="n">translate</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
                <span class="p">},</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>


</code></pre></div></div>

<p>好像挺容易的，就是iOS的CGAffineTrans的API，没错，iOS封装了几个好用的API去实现仿射变换的效果</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
        <span class="c1">//位移仿射</span>
        <span class="kt">CGAffineTransformMakeTranslation</span>
        <span class="kt">CGAffineTransformTranslate</span>
        <span class="c1">//旋转仿射</span>
        <span class="kt">CGAffineTransformMakeRotation</span>
        <span class="kt">CGAffineTransformRotate</span>
        <span class="c1">//缩放仿射</span>
        <span class="kt">CGAffineTransformMakeScale</span>
        <span class="kt">CGAffineTransformScale</span>

        <span class="c1">//叠加仿射效果</span>
        <span class="kt">CGAffineTransformConcat</span>

        <span class="c1">//CATransform3D也对应一组相似的api，这个后面在研究到它的时候仔细说说</span>
        

</code></pre></div></div>

<p>带make的方法是直接返回一个仿射变换效果，不带make方法是用来给已有的仿射效果叠加效果，类似于CGAffineTransformConcat方法的作用。</p>

<p>在大多数情况下用这几个封装好的仿射方法基本就能实现大多数的需求。但是既然是研究仿射，那大家可以看CGAffineTransform最基础的那个仿射方法的使用，能理解这个方法的使用，基本上就知道仿射是个什么意思了。</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kt">CGAffineTransformMake</span> <span class="p">(</span> <span class="kt">CGFloat</span> <span class="n">a</span><span class="p">,</span> <span class="kt">CGFloat</span> <span class="n">b</span><span class="p">,</span> <span class="kt">CGFloat</span> <span class="n">c</span><span class="p">,</span> <span class="kt">CGFloat</span> <span class="n">d</span><span class="p">,</span> <span class="kt">CGFloat</span> <span class="n">tx</span><span class="p">,</span> <span class="kt">CGFloat</span> <span class="n">ty</span> <span class="p">)</span>
</code></pre></div></div>

<p>这个方法的6个参数可以拼出一个矩阵</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    //仿射矩阵
    [         ]
      a  b  0
      c  d  0
      tx ty 1
    [         ]

</code></pre></div></div>

<p>仿射变化的定义有点复杂，我自己理解就是： 点p（以二维坐标为例）通过仿射矩阵C 后变成新的点p’ 。</p>

<p>以上面的缩放仿射变化CGAffineTransformScale为例。就是view中每一个点p通过矩阵C后，view中的每一个新的点p’组成的新的图形，相比之前的view有了缩放的效果。</p>

<h2 id="仿射变换的原理和计算">仿射变换的原理和计算</h2>

<p>仿射变化原理是数学中的矩阵原理（线性代数、矩阵分析。感慨之前为什么没好好学这门课。。。 自己看这个仿射矩阵画了好多时间才弄明白怎么回事，还补了补基础的矩阵计算知识），要弄明白仿射矩阵对作用点的影响，还得先看看矩阵的乘法怎么计算。</p>

<h3 id="基础-矩阵的乘法">基础-矩阵的乘法</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 矩阵A = [      ]
          1  1 
          2  0
        [      ]

 矩阵B = [         ]
          0  2  3
          1  1  2
        [         ]

 矩阵C = A * B =     [         ]
                      1  3  5
                      0  4  6
                    [         ]

</code></pre></div></div>

<p>计算过程：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>矩阵C = A * B =      [                                 ]      =        [          ] 
                      (1*0+1*1)  (1*2+1*1)  (1*3+1*2)                    1  3  5
                      (2*0+0*1)  (2*2+0*1)  (2*3+0*2)                    0  4  6
                    [                                 ]               [           ]

=
</code></pre></div></div>

<p>计算规则：</p>

<ol>
  <li>：当矩阵A的列数等于矩阵B的行数是，才可以计算</li>
  <li>：计算的结果矩阵C的行数等于A的行数，列数等于B的列数</li>
  <li>：结果矩阵C的第 i 行第 j 列的元素Cij  等于矩阵A的第 i 行的元素与矩阵B的第 j 列对应元素乘积之和</li>
</ol>

<h3 id="仿射变换的矩阵计算">仿射变换的矩阵计算</h3>

<p>仿射计算中，（以二维坐标为例，坐标点为x,y）我们设我们的坐标点矩阵为</p>

<p><code class="highlighter-rouge">A = [x y 1]</code></p>

<p>仿射变换基础矩阵为：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    //仿射基础矩阵
    B = [         ]
          a  b  0
          c  d  0
          tx ty 1
        [         ]

</code></pre></div></div>

<p>根据矩阵计算规则我们知道A x B的结果是一个1行3列的矩阵，设A x B得到的新矩阵C ，那么C的矩阵应该为</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    C = [  (a*x+c*y+tx)  (b*x+d*y+ty)  (1) ]

</code></pre></div></div>

<p>设C为 = [x’ y’ 1] , 那么可以得到</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x' = a*x + c*y + tx
y' = b*x + d*y + ty

</code></pre></div></div>

<p>看明白了嘛？这步很关键。根据这个公式，那么仿射矩阵就可以分成5种分别对应</p>

<ul>
  <li>平移（Translation）</li>
  <li>缩放（Scale）</li>
  <li>翻转（Flip）</li>
  <li>旋转（Rotation）</li>
  <li>剪切（Shear）</li>
</ul>

<p><img src="http://my.csdn.net/uploads/201205/07/1336349553_1044.jpg" alt="" /></p>

<p><img src="http://my.csdn.net/uploads/201205/07/1336349566_2134.jpg" alt="" /></p>

<h3 id="平移translation">平移（Translation）</h3>

<p>设a,d=1  c,b = 0 那么</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x' = a*x + c*y + tx
y' = b*x + d*y + ty

</code></pre></div></div>

<p>就变成了</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x' = x + tx
y' = y + ty

</code></pre></div></div>

<p>这个不就是新的点P’(x’ y’) 是根据原来的P在x和y分别添加了一个常量就可以得到了嘛？ 所以这个就是仿射中的平移效果了。把a,b,c,d带入仿射的基础矩阵，就得了仿射的位移矩阵</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       //仿射基础矩阵
        [         ]
          a  b  0
          c  d  0
          tx ty 1
        [         ]

</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       //仿射位移矩阵
       [          ]
          1  0  0
          0  1  0
          tx ty 1
       [          ]

</code></pre></div></div>

<p>再来看看代码</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">//向右移动300的仿射效果</span>
<span class="k">let</span> <span class="nv">translate</span> <span class="o">=</span> <span class="kt">CGAffineTransformMakeTranslation</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1">//使用仿射基础方法CGAffineTransformMake ( CGFloat a, CGFloat b, CGFloat c, CGFloat d, CGFloat tx, CGFloat ty )</span>
<span class="k">let</span> <span class="nv">translate</span> <span class="o">=</span> <span class="kt">CGAffineTransformMake</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

</code></pre></div></div>

<p>这下应该能明白仿射基础矩阵的意思了，如果没明白，从头在看一遍吧</p>

<h3 id="缩放scale">缩放（Scale）</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x' = a*x + c*y + tx
y' = b*x + d*y + ty

</code></pre></div></div>

<p>设 c,b,tx,ty = 0 ,得到</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x' = a*x 
y' = d*y 

</code></pre></div></div>

<p>新坐标（x’,y’）和原坐标是倍数关系，这个就可以用来做缩放效果了。所以得到缩放矩阵</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       //仿射缩放矩阵
       [          ]
          a  0  0
          0  d  0
          0  0  1
       [          ]

       //也可以写成
       [            ]
          sx  0   0
          0   sy  0
          0   0   1
       [            ]

</code></pre></div></div>

<p>代码</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">//x和y都放大1倍</span>
<span class="c1">//let scaleAffine = CGAffineTransformMakeScale(2, 2)</span>

<span class="c1">//使用仿射基础方法CGAffineTransformMake </span>
<span class="k">let</span> <span class="nv">scaleAffine</span> <span class="o">=</span> <span class="kt">CGAffineTransformMake</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="剪切shear">剪切（Shear）</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x' = a*x + c*y + tx
y' = b*x + d*y + ty

</code></pre></div></div>

<p>设 a,d = 1  tx,ty = 0 ,得到</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x' = x + cy
y' = y + bx 

</code></pre></div></div>

<p>x和y的变化总是相互关联，这个就是剪切（Shear）</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       //仿射剪切矩阵
       [          ]
          1  b  0
          c  1  0
          0  0  1
       [          ]

       //也可以写成
       [             ]
          1   shx  0
         shy   1   0
          0    0   1
       [             ]

</code></pre></div></div>

<p>代码</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">//使用仿射基础方法CGAffineTransformMake,设置x和y都为0.5的斜切</span>
<span class="c1">//斜切效果只能用CGAffineTransformMake实现,但是通过CATransform3DMakeRotation可以有类似的效果</span>
<span class="k">let</span> <span class="nv">shearAffine</span> <span class="o">=</span> <span class="kt">CGAffineTransformMake</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="旋转rotation">旋转（Rotation）</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       //仿射旋转矩阵
       [                  ]
          cosa   sina   0
         -sina   cosa   0
           0      0     1
       [                  ]

</code></pre></div></div>

<p>代码</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">let</span> <span class="nv">rotation</span> <span class="o">=</span> <span class="kt">CGAffineTransformMake</span><span class="p">(</span><span class="kt">CGFloat</span><span class="p">(</span> <span class="nf">cos</span><span class="p">(</span><span class="kt">M_PI_4</span><span class="p">)</span> <span class="p">),</span> <span class="kt">CGFloat</span><span class="p">(</span> <span class="nf">sin</span><span class="p">(</span><span class="kt">M_PI_4</span><span class="p">)</span> <span class="p">),</span> <span class="o">-</span><span class="kt">CGFloat</span><span class="p">(</span> <span class="nf">sin</span><span class="p">(</span><span class="kt">M_PI_4</span><span class="p">)</span> <span class="p">),</span> <span class="kt">CGFloat</span><span class="p">(</span> <span class="nf">cos</span><span class="p">(</span><span class="kt">M_PI_4</span><span class="p">)</span> <span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>翻转（Flip）</li>
</ul>

<p>我不知道使用CGAffineTransformMake()如何设置矩阵可以实现翻转效果，请知道的读者告知。我阅读的所有Flip效果都是使用CATransform3D实现的，代码如下</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">//Flip仿射，要是有3D去实现</span>
<span class="k">let</span> <span class="nv">flip</span> <span class="o">=</span> <span class="kt">CATransform3DMakeRotation</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="c1">//示例</span>
<span class="k">let</span> <span class="nv">flipX</span> <span class="o">=</span> <span class="kt">CATransform3DMakeRotation</span><span class="p">(</span><span class="kt">CGFloat</span><span class="p">(</span><span class="kt">M_PI</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">flipY</span> <span class="o">=</span> <span class="kt">CATransform3DMakeRotation</span><span class="p">(</span><span class="kt">CGFloat</span><span class="p">(</span><span class="kt">M_PI</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">flipZ</span> <span class="o">=</span> <span class="kt">CATransform3DMakeRotation</span><span class="p">(</span><span class="kt">CGFloat</span><span class="p">(</span><span class="kt">M_PI</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="总结一下catransform3dmakerotation方法的6个参数">总结一下CATransform3DMakeRotation方法的6个参数</h3>

<p>在不考虑旋转时，CATransform3DMakeRotation6个参数可以写成</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 
 <span class="c1">//sx,sy:缩放因子</span>
 <span class="c1">//shx,shy:斜切因子</span>
 <span class="c1">//tx,ty:移动因子</span>
 <span class="kt">CGAffineTransformMake</span> <span class="p">(</span><span class="n">sx</span><span class="p">,</span><span class="n">shx</span><span class="p">,</span><span class="n">shy</span><span class="p">,</span><span class="n">sy</span><span class="p">,</span><span class="n">tx</span><span class="p">,</span><span class="n">ty</span><span class="p">)</span>

</code></pre></div></div>

<h2 id="仿射在ios中常用的方法">仿射在iOS中常用的方法</h2>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
        <span class="c1">//位移仿射</span>
        <span class="kt">CGAffineTransformMakeTranslation</span>
        <span class="kt">CGAffineTransformTranslate</span>
        <span class="c1">//旋转仿射</span>
        <span class="kt">CGAffineTransformMakeRotation</span>
        <span class="kt">CGAffineTransformRotate</span>
        <span class="c1">//缩放仿射</span>
        <span class="kt">CGAffineTransformMakeScale</span>
        <span class="kt">CGAffineTransformScale</span>

        <span class="c1">//叠加仿射效果</span>
        <span class="kt">CGAffineTransformConcat</span>
        
        <span class="c1">//仿射矩阵方法，可以直接做效果叠加</span>
        <span class="kt">CGAffineTransformMake</span> <span class="p">(</span><span class="n">sx</span><span class="p">,</span><span class="n">shx</span><span class="p">,</span><span class="n">shy</span><span class="p">,</span><span class="n">sy</span><span class="p">,</span><span class="n">tx</span><span class="p">,</span><span class="n">ty</span><span class="p">)</span>

        <span class="cm">/*
            这个是一个初始化矩阵，带入矩阵算法计算后的结构会得到
            x'=x , y'=y
            它的作用是清除之前对矩阵设置的仿射效果，或者用来初始化一个原始无效果的仿射矩阵
            [ 1 0 0 ]
            [ 0 1 0 ]
            [ 0 0 1 ]
        */</span>
        <span class="kt">CGAffineTransformIdentity</span>

        <span class="c1">//检查是否有做过仿射效果</span>
        <span class="kt">CGAffineTransformIsIdentity</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>

        <span class="c1">//检查2个仿射效果是否相同</span>
        <span class="kt">CGAffineTransformEqualToTransform</span><span class="p">(</span><span class="n">transform1</span><span class="p">,</span><span class="n">transform2</span><span class="p">)</span>

        <span class="c1">//仿射效果反转（反效果，比如原来扩大，就变成缩小）</span>
        <span class="kt">CGAffineTransformInvert</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>


</code></pre></div></div>

<h2 id="3d仿射变换">3D仿射变换</h2>

<p>3D仿射在iOS中是通过CATransform3D实现的，它有着与CGAffineTrans类似的一组API，但他们有个重要的区别在于<strong>CATransform3D的效果只能加在layer的transform属性上</strong>，而CGAffineTransform直接加在View上</p>

<h3 id="3d仿射矩">3D仿射矩</h3>

<p>类似于2D仿射，3D仿射也有一个基础矩阵，并且比2D的多一个维度</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    [                       ]
        m11  m12  m13  m14
        m21  m22  m23  m24
        m31  m32  m33  m34
        m41  m42  m43  m44  
    [                       ]

</code></pre></div></div>

<p>矩阵的计算过程和2D类似，最后也能得到矩阵中每个位置的值对3D仿射效果的作用。我直接把结果贴出来。</p>

<p>平移因子：  m41（x位置）  m42（y位置）  m43（z位置）
缩放因子：  m11（x位置）  m22（y位置）<br />
切变因子：  m21（x位置）  m12（y位置）<br />
旋转因子：  m13（x位置）  m31（y位置）<br />
透视因子：  m34(有旋转才能看出效果)</p>

<h3 id="3d仿射常用的方法">3D仿射常用的方法</h3>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
        <span class="c1">//位移3D仿射</span>
        <span class="kt">CATransform3DMakeTranslation</span>
        <span class="kt">CATransform3DTranslation</span>
        
        <span class="c1">//旋转3D仿射</span>
        <span class="kt">CATransform3DMakeRotation</span>
        <span class="kt">CATransform3DRotation</span>
     
        <span class="c1">//缩放3D仿射</span>
        <span class="kt">CATransform3DMakeScale</span>
        <span class="kt">CATransform3DScale</span>

        <span class="c1">//叠加3D仿射效果</span>
        <span class="kt">CATransform3DConcat</span>
        
        <span class="c1">//仿射基础3D方法，可以直接做效果叠加</span>
        <span class="kt">CGAffineTransformMake</span> <span class="p">(</span><span class="n">sx</span><span class="p">,</span><span class="n">shx</span><span class="p">,</span><span class="n">shy</span><span class="p">,</span><span class="n">sy</span><span class="p">,</span><span class="n">tx</span><span class="p">,</span><span class="n">ty</span><span class="p">)</span>

        <span class="cm">/*
            这个是一个初始化矩阵，带入矩阵算法计算后的结构会得到
            x'=x , y'=y , z'=z
            它的作用是清除之前对矩阵设置的仿射效果，或者用来初始化一个原始无效果的仿射矩阵
            [ 1 0 0 0 ]
            [ 0 1 0 0 ]
            [ 0 0 1 0 ]
            [ 0 0 0 1 ]
        */</span>
        <span class="kt">CATransform3DIdentity</span>

        <span class="c1">//检查是否有做过仿射3D效果</span>
        <span class="kt">CATransform3DIsIdentity</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>

        <span class="c1">//检查是否是一个仿射3D效果</span>
        <span class="kt">CATransform3DIsAffine</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>

        <span class="c1">//检查2个3D仿射效果是否相同</span>
        <span class="kt">CATransform3DEqualToTransform</span><span class="p">(</span><span class="n">transform1</span><span class="p">,</span><span class="n">transform2</span><span class="p">)</span>

        <span class="c1">//3D仿射效果反转（反效果，比如原来扩大，就变成缩小）</span>
        <span class="kt">CATransform3DInvert</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>

        <span class="c1">//2D仿射转换3D仿射</span>
        <span class="kt">CATransform3DGetAffineTransform</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>
        <span class="kt">CATransform3DMakeAffineTransform</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>

</code></pre></div></div>

<h2 id="demo">demo</h2>
<hr />

<p><a href="https://github.com/coolnameismy/demo/tree/master/AffineTransform">本文的demo下载</a></p>

<p>本文demo是一个playground文件，做了一些2D仿射的效果。如果没有显示出UIView，可以在每一个bg对应的行后面的小圆圈点一下，就可以在playground中看见UIView对应仿射的变化</p>

<p>感谢收看，如果对大家有帮助，请<a href="https://github.com/coolnameismy">github上follow和star</a>，本文发布在<a href="https://zsmsimon.github.io/">刘彦玮的技术博客</a>，转载请注明出处</p>

<h2 id="推荐的相关文章">推荐的相关文章</h2>
<hr />

<p>网上关于仿射的文章参考了许多，也没看到几篇质量很高的文章，基本上都没这这篇写的全，倒是有一个利用3D仿射做的一个特效还不错，大家可以看看</p>

<p><a href="http://www.jianshu.com/p/9cbf52eb39dd">iOS动效-利用CATransform3D实现翻页动画效果</a></p>


    <div class="declare">
        <div>

        </div>
    </div>
</article>
<!-- end #post__content -->

<div id="post__share">
  <a id="icon-twitter" class="fontello" href="https://twitter.com/intent/tweet?url=http://localhost:4000/2015/11/24/iOS-affine-transfermation-animation.html&text=iOS动画和特效（七）仿射变换-CGAffineTransform" target="_blank"></a>
  <a id="icon-cc" class="fontello" href="http://github.com/ZSMSimon" target="_blank"></a>
  <a id="icon-weibo" class="fontello" href="http://v.t.sina.com.cn/share/share.php?url=http://localhost:4000/2015/11/24/iOS-affine-transfermation-animation.html&title=iOS动画和特效（七）仿射变换-CGAffineTransform" target="_blank"></a>
    <!-- <div class="share-info">分享一下~</div> -->
</div>
<div id="qrcode" >
	<img src="http://localhost:4000/assets/images/qrcode.jpg" style="margin: 0 auto;display: block;" width="200" height="200" alt="">
</div>
<!-- end #post__share -->
<div id="disqus_thread" name="coolnameismy">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>
</div>


            <!---->
    <!--<p id="copyright">Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>-->
    <!--&nbsp;&nbsp;|&nbsp;&nbsp;Theme <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll</a>-->
    <!--&nbsp;&nbsp;|&nbsp;&nbsp;Hosted on <a href="https://pages.github.com" target="_blank">Github</a></p>-->
      </div> <!-- end #pjax -->

      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">Table of Contents</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div> <!-- end #post -->

    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>

<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.pjax.js"></script>
<script src="/assets/js/nprogress.js"></script>
<script src="/assets/js/searchbox.js"></script>
<script src="/assets/js/script.js"></script>


    <script>
    //百度站点统计,排除localhost
    if(window.location.host.indexOf("localhost") ==-1 &&  window.location.host.indexOf("127.0.0.1") == -1){

        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?2c1583237ca3f5343d8dab0140019ca7";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    }
</script>
   </body>
 </html>